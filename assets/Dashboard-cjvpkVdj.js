import{a as B}from"./tasks-tvHa4Sbp.js";import{_ as I,r as u,o as N,b as w,c as n,d as i,f as c,e as t,g as h,F as y,B as k,i as S,s as x,R as V,l as g,t as L,J as R,K as j}from"./index-2VcAIsLU.js";const l=_=>(R("data-v-0a76d79e"),_=_(),j(),_),F={class:"container mt-5"},G={class:"mb-5"},z={class:"d-flex align-items-center justify-content-between"},A=l(()=>t("h2",{class:"text-primary fs-4 fw-bold"},"我的任務列表",-1)),E=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),J={class:"position-relative",style:{"min-height":"200px"}},K={class:"list-unstyled row"},q={class:"card"},H=["src","alt"],O={class:"card-body h-100"},P={class:"card-title fw-bold mb-3"},Q=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),U={class:"mb-5"},W={class:"d-flex align-items-center justify-content-between"},X=l(()=>t("h2",{class:"text-primary fs-4 fw-bold"}," 當前的直播班課程",-1)),Y=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),Z={key:0,class:"list-unstyled row"},ss={class:"card"},ts=["src","alt"],as={class:"card-body h-100"},es={class:"card-title fw-bold mb-3"},os=l(()=>t("span",{class:"material-symbols-outlined align-middle"},"arrow_forward",-1)),ns={key:1,class:"text-center bg-light py-3"},is=l(()=>t("p",{class:"mb-0"},"目前沒有進行中的直播班課程",-1)),ls=[is],cs={__name:"Dashboard",setup(_){const{apiGetMyTask:T,apiGetTraining:C}=B,p=u(!1),b=u([]),D=async(d=1,r=3)=>{var a,o,s,m;p.value=!0;try{const{tasks:e}=await T(d,r);b.value=e}catch(e){x.toastMessage("danger","info",`${(o=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:o.statusCode}:${(m=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:m.message}`)}p.value=!1},f=u(!1),v=u([]),$=async()=>{var d,r,a,o;f.value=!0;try{const{training_classes:s}=await C();v.value=s.filter(m=>{const e=new Date(m.end_at).getTime(),M=new Date().getTime();return e>M}).slice(0,3)}catch(s){x.toastMessage("danger","info",`${(r=(d=s==null?void 0:s.response)==null?void 0:d.data)==null?void 0:r.statusCode}:${(o=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:o.message}`)}f.value=!1};return N(()=>{D(),$()}),(d,r)=>{const a=w("RouterLink"),o=w("Loading");return n(),i(y,null,[c(V),t("div",F,[t("div",G,[t("div",z,[A,c(a,{to:"/tasks/my",class:"text-decoration-none link-primary fs-6 fw-normal"},{default:h(()=>[g(" 查看所有任務 "),E]),_:1})]),t("div",J,[c(o,{"is-full-page":!1,active:p.value,"z-index":1049},null,8,["active"]),t("ul",K,[(n(!0),i(y,null,k(b.value,s=>(n(),i("li",{key:s.id,class:"col-md-4 mb-6"},[t("div",q,[t("img",{src:s.image_url,class:"card-img-top rounded mb-3",alt:s.name},null,8,H),t("div",O,[t("h5",P,L(s.name),1),c(a,{to:`/tasks/${s.id}`,class:"goto"},{default:h(()=>[g(" 查看任務 "),Q]),_:2},1032,["to"])])])]))),128))])])]),t("div",U,[t("div",W,[X,c(a,{to:"/training",class:"text-decoration-none link-primary fs-6 fw-normal"},{default:h(()=>[g(" 查看所有直播班 "),Y]),_:1})]),v.value.length>0?(n(),i("ul",Z,[(n(!0),i(y,null,k(v.value,s=>(n(),i("li",{key:s.id,class:"col-md-4 mb-6"},[t("div",ss,[t("img",{src:s.cover_url,class:"card-img-top rounded mb-3",alt:s.title},null,8,ts),t("div",as,[t("h5",es,L(s.name),1),c(a,{class:"stretched-link",to:`/training/${s.id}`},{default:h(()=>[g(" 進入直播班 "),os]),_:2},1032,["to"])])])]))),128))])):f.value?S("",!0):(n(),i("div",ns,ls))])])],64)}}},_s=I(cs,[["__scopeId","data-v-0a76d79e"]]);export{_s as default};
